<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Find Businesses</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="" crossorigin=""></script>
  <style>
    :root { --green1:#004225; --green2:#007f5f; --accent:#118c4f; }
    body { font-family: Arial, sans-serif; background: linear-gradient(to right, var(--green1), var(--green2)); margin:0; padding:24px; color:#0d1f17;}
    .card { background:#fff; max-width:1200px; margin:auto; padding:22px; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.12); }
    h1 { margin:0 0 10px; color:#004225; text-align:center; }
    .row { display:grid; grid-template-columns: 2fr 2fr 1fr 1fr; gap:16px; }
    @media (max-width:1000px){ .row{ grid-template-columns:1fr; } }
    label { font-weight:600; font-size:14px; }
    input, select { width:100%; padding:12px; margin:8px 0 18px; border:1px solid #cfcfcf; border-radius:8px; font-size:15px; }
    input[readonly] { background:#f6f7f8; }
    button { background: var(--accent); color:#fff; border:none; border-radius:8px; padding:12px 16px; font-size:16px; cursor:pointer; width:100%; }
    .wrap { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    @media (max-width:1000px){ .wrap{ grid-template-columns:1fr; } }
    #map { height: 520px; width: 100%; border-radius: 12px; border: 1px solid #e5ece9; }
    .results { margin-top:8px; }
    .biz { border:1px solid #e8ecea; border-radius:8px; padding:12px; margin-bottom:10px; }
    .muted { color:#6b7c76; font-size:13px; }
    .pill { display:inline-block; padding:3px 8px; border-radius:999px; background:#e8faf0; color:#0f5a34; font-size:12px; margin-left:6px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Find Businesses Near You</h1>
    <div class="row">
      <div>
        <label>Business Type</label>
        <input id="typeInput" placeholder="e.g., Barber, Plumber, Catering" />
      </div>
      <div>
        <label>City (type to search)</label>
        <input id="cityInput" placeholder="Start typing a city" list="cityList" autocomplete="off" />
        <datalist id="cityList"></datalist>
        <div class="muted">We use the city center for the search radius.</div>
      </div>
      <div>
        <label>State (auto-filled)</label>
        <input id="stateOutput" placeholder="State" readonly />
      </div>
      <div>
        <label>Radius</label>
        <select id="radiusSelect">
          <option value="25">25 miles</option>
          <option value="50" selected>50 miles</option>
          <option value="100">100 miles</option>
          <option value="250">250 miles</option>
        </select>
      </div>
    </div>

    <input type="hidden" id="lat" />
    <input type="hidden" id="lng" />

    <div class="wrap">
      <div>
        <div id="map"></div>
      </div>
      <div>
        <button id="searchBtn">Search Businesses</button>
        <div class="results" id="results"></div>
      </div>
    </div>
  </div>

  <script>
    // Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDHROoVHEPvBSo7ZXGZB2xf7Wnb_U9SErs",
      authDomain: "black-service-spot.firebaseapp.com",
      projectId: "black-service-spot",
      storageBucket: "black-service-spot.appspot.com",
      messagingSenderId: "707361777966",
      appId: "1:707361777966:web:f41f3276b26d5dca50b2bf"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <script src="js/city-index-loader.js"></script>
  <script src="js/radius-search.js"></script>
</body>
</html>
